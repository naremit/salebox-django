{% extends "salebox/checkout/_base.html" %}

{% block checkout %}

<pre>
shipping_address_id: {{ shipping_address_id }}
invoice_address_id: {{ invoice_address_id }}
invoice_required: {{ invoice_required }}
</pre>

{% if shipping_addresses|length > 0 %}
<form method="post">
    {% csrf_token %}
    <input type="hidden" name="salebox_form_name" value="select_address" />

    <h3>Pick a shipping address:</h3>
    {% include "salebox/address/list_radio.html" with addresses=shipping_addresses field_name='shipping_address_id' %}
    <hr>
    <p>Or add a new one</p>

    <hr>
    <h3>Pick an invoice address:</h3>
    {% include "salebox/address/list_radio.html" with addresses=invoice_addresses field_name='invoice_address_id' %}
    <hr>
    <p>Or add a new one</p>

    <input type="submit" value="go" />
</form>
{% endif %}


<form method="post">
    {% csrf_token %}
    <input type="hidden" name="salebox_form_name" value="add_shipping" />
    <h2>Add shipping address</h2>
    {% include "salebox/address/add_form.html" with form=shipping_form form_id='addaddress' address_extras=shipping_address_extras hide_default=True %}
</form>

<form method="post">
    {% csrf_token %}
    <input type="hidden" name="salebox_form_name" value="add_invoice" />
    <h2>Add invoice address</h2>
    {% include "salebox/address/add_form.html" with form=invoice_form form_id='addinvoice' address_extras=invoice_address_extras hide_default=True %}
</form>

<!--
    {% if has_addresses %}
        <form method="post" id="shipping_address_choose">
            {% csrf_token %}

            <p>Pick your delivery address:</p>
            {{ shipping_address_list | safe }}
            <p>Or, <a href="#" onclick="$('#shipping_address_choose').hide(); $('#shipping_address_add').show();">enter a new address</a></p>

            <br>
            <div>
                <input type="checkbox" name="invoice_required" id="invoice_required" onchange="($(this).is(':checked')) ? $('#invoice_address_choose').show() : $('#invoice_address_choose').hide()"{% if invoice_required %} checked{% endif %}>
                <label for="invoice_required">Would you like a tax invoice?</label>
            </div>

            <div id="invoice_address_choose"{% if not invoice_required %} style="display: none"{% endif %}>
                <p>Pick your invoice address:</p>
                {{ invoice_address_list | safe }}
                <p>Or, <a href="#" onclick="$('#shipping_address_choose').hide(); $('#invoice_address_add').show();">enter a new address</a></p>
            </div>

            <br>
            <button class="btn btn-primary">Next</button>
        </form>

        <div id="shipping_address_add" style="display: none">
            <p>Enter your delivery address:</p>
            {{ add_shipping_form | safe }}
            <p>Or, <a href="#" onclick="$('#shipping_address_add').hide(); $('#shipping_address_choose').show();">use an existing address</a></p>
        </div>

        <div id="invoice_address_add" style="display: none">
            <p>Enter your invoice address:</p>
            {{ add_invoice_form | safe }}
            <p>Or, <a href="#" onclick="$('#invoice_address_add').hide(); $('#shipping_address_choose').show();">use an existing address</a></p>
        </div>
    {% else %}
        <p>Enter your delivery address:</p>
        {{ add_shipping_form | safe }}
    {% endif %}
-->
{% endblock %}
